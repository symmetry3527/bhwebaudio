<!doctype html>
<head>
	<title>BH Web Audio</title>
	<script src="./soundV.js"></script>
	<style>
		html,body,div,img{margin:0; padding:0;}
		.circle{width:200px; height:200px; background:red; position: absolute; left:calc(50%-100%); top:200px;
		animation:Moving 8s linear infinite;}
		
		@keyframes Moving{
			0%{}
			100%{trnsform:rotate(-360deg)}
		}
		.circle img{width:100%; height:auto;}
	</style>
</head>
<body>
	<button id="stopBut">stop</button>
	<button id="playBut">play</button>
	<button id="pauseBut">pause</button>&nbsp;&nbsp;&nbsp;
	
	<button id="play1">그린데이</button>
	
	<input id="audio_file" type="file" accept="audio/*" />
	
	<div class = "circle" id = "circle">
	  <img src="bbd.png" id="cImg">
	</div>
<script>
	var newSound = new SoundBH("bbd.mp3",16);

	(function loop(){

		var vol = newSound.getGain()/10;

		circle.style.width = vol + "px";
		circle.style.height = vol + "px";
		circle.style.borderRadius = vol/2 + "px";
		circle.style.left = "calc(50%-"+(vol/2)+"px");
		circle.style.top = 300 - (vol/2) + "px";
		
	window.requestAnimationFrame(loop);})();

	playBut.onclick = function(){ newSound.play(); };
	stopBut.onclick = function(){ newSound.play(); };
	pauseBut.onclick = function(){ newSound.play(); };

	audio_file.onchange = function(){
		newSound.change(URL.createObjectURL(this.files[0]));
	};
	
	play1.onclick = function(){
		cImg.setAttribute("src","bbd.png");
		newSound.change("bbd.mp3");
	};

</script>
</body>
